import React, { useContext } from "react"
import { Link } from "gatsby"
import NavLinks from "../NavLinks/NavLinks"
import { RiMenuFill } from "react-icons/ri"
import { AiOutlineShoppingCart } from "react-icons/ai"
import formatPrice from "../../utils/formatPrice"

import styles from "./Header.module.scss"

import { CartContext } from "../../context/CartContext"

const Header = () => {
  const { cartTotal } = useContext(CartContext)

  return (
    <header className={styles.header}>
      <div className={styles.container}>
        <Link to="/">
          <div className={styles.title}>
            <h1>WLW</h1>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path d="M467.534 112.088C444.461 82.851 409.851 48 376 48c-10.27 0-20.622 7.034-34.594 20.191C321.621 59.37 278.094 48 256 48c-22.113 0-65.64 11.378-85.406 20.191C156.622 55.034 146.27 48 136 48c-33.851 0-68.461 34.851-91.534 64.088C27.274 133.873 0 174.831 0 192c0 32.247 1.043 46.724 27.2 81.6 19.966 26.621 22.082 65.4 35.475 86.458 8.763 13.779 21.977 19.27 37.206 15.464 15.176-3.794 25.03-16.588 29.396-38.087 16.89 23.263 14.047 36.937 15.162 44.849C145.562 412.426 197.133 464 256 464c58.77 0 110.436-51.52 111.561-81.715 1.109-7.873-1.828-21.567 15.148-44.913 4.463 22.044 16.021 39.329 38.588 39.329 42.297 0 35.241-65.418 63.502-103.1 26.157-34.876 27.2-49.353 27.2-81.6.001-17.17-27.273-58.128-44.465-79.913zM256 344c-8.33 0-18.196-12.575-22.268-20.516 11.83-4.646 32.698-4.648 44.535 0C274.196 331.425 264.33 344 256 344zm-.001 63.962c10.396 7.852 23.978 12.591 37.934 14.341-25.229 12.909-50.609 12.923-75.867 0 13.955-1.75 27.538-6.489 37.933-14.341zM459.2 254.4c-25.193 33.589-29.058 82.236-38.207 90.281-5.711-.52-7.822-17.966-8.331-23.682C410.04 291.502 416 249.359 416 224c0-43.279-32.313-108.404-33.689-111.155-3.952-7.904-13.564-11.106-21.466-7.156-7.904 3.952-11.107 13.563-7.156 21.466C362.12 144.017 384 194.285 384 224c0 16.692-3.052 43.399-3.821 69.035C371.528 300.491 336 333.691 336 376c0 19.833-55.647 19.892-65.865.533a16.703 16.703 0 00-1.658-2.544C292.516 366.319 312 336.06 312 320c0-42.948-112-42.948-112 0 0 16.054 19.418 46.297 43.523 53.989a16.677 16.677 0 00-1.658 2.543C231.612 395.95 176 395.798 176 376c0-42.309-35.528-75.509-44.179-82.965C131.08 268.329 128 240.282 128 224c0-29.642 21.882-79.961 30.311-96.845 3.952-7.903.748-17.514-7.156-21.466-7.903-3.952-17.515-.748-21.466 7.156C128.313 115.596 96 180.721 96 224c0 25.372 5.958 67.523 3.337 96.999-.508 5.716-2.619 23.161-8.331 23.682-9.245-8.129-12.925-56.572-38.207-90.281-20.578-27.437-20.797-34.916-20.8-61.529 1.856-7.371 17.018-35.5 39.828-63.768 24.049-29.805 47.328-47.966 62.735-49.051 4.727 2.375 14.519 11.658 22.124 19.262 6.059 6.06 15.832 6.27 22.146.462C186.782 94.349 234.608 80 256 80s69.218 14.349 77.168 19.776c6.307 5.801 16.08 5.604 22.146-.462 13.201-13.201 19.307-17.838 22.126-19.262 15.407 1.087 38.685 19.249 62.732 49.051 22.81 28.268 37.972 56.397 39.828 63.768-.002 26.613-.222 34.092-20.8 61.529z" />
              <circle cx="180" cy="212" r="20" />
              <circle cx="332" cy="212" r="20" />
            </svg>
          </div>
        </Link>
        <section className={styles.nav}>
          <NavLinks />
        </section>
        <section className={styles.icons}>
          <Link to="/cart">
            <div className={styles.cartContainer}>
              <p className={styles.total}>{formatPrice(cartTotal)}</p>
              <AiOutlineShoppingCart className={styles.cart} />
            </div>
          </Link>
          <RiMenuFill className={styles.navIcon} />
        </section>
      </div>
    </header>
  )
}

export default Header
